            {/* Input Area - Like Claude/Perplexity */}
            <div className="relative">
              <div className="flex flex-col bg-white border-2 border-gray-300 rounded-2xl shadow-sm focus-within:border-teal-500 focus-within:shadow-lg transition-all">
                {/* Textarea Container */}
                <div className="relative">
                  {/* Text Input */}
                  <textarea
                    value={inputValue}
                    onChange={(e) => setInputValue(e.target.value)}
                    onKeyPress={handleKeyPress}
                    placeholder="Posez votre question..."
                    rows={1}
                    className="w-full py-4 px-4 bg-transparent focus:outline-none resize-none text-gray-900 placeholder-gray-400 text-sm sm:text-base"
                    style={{
                      minHeight: "56px",
                      maxHeight: "200px",
                      paddingRight: "100px"
                    }}
                  />

                  {/* Right Icons - Actions */}
                  <div className="absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2">
                    <button
                      type="button"
                      className="p-2 text-gray-400 hover:text-teal-600 hover:bg-teal-50 rounded-lg transition-colors"
                      title="Commande vocale"
                    >
                      <MicrophoneIcon className="w-5 h-5" />
                    </button>

                    <button
                      onClick={handleSend}
                      disabled={!inputValue.trim() || isLoading}
                      className="p-2.5 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-sm"
                      title="Envoyer"
                    >
                      <PaperAirplaneIcon className="w-5 h-5" />
                    </button>
                  </div>
                </div>

                {/* Context Bar - Below textarea, inside bubble */}
                <ContextBar
                  country={selectedCountry}
                  league={selectedLeague}
                  match={selectedMatch}
                  onCountryClick={() => setShowCountryDropdown(true)}
                  onLeagueClick={() => setShowLeagueDropdown(true)}
                  onMatchClick={() => setShowMatchDropdown(true)}
                />
              </div>

              {/* Dropdowns - Outside bubble, positioned absolutely */}
              <div className="relative" ref={countryDropdownRef}>
                {showCountryDropdown && (
                  <div className="absolute left-0 top-full mt-2 w-72 bg-white border border-gray-200 rounded-lg shadow-xl z-[150] overflow-hidden" style={{ maxHeight: "260px" }}>
                    {/* ... existing country dropdown code ... */}
                  </div>
                )}
              </div>
              {/* ... rest of dropdowns ... */}
            </div>
